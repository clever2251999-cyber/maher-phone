<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8">
  <title>Maher Phone - Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body{
        font-family:"Cairo", sans-serif;
        direction:rtl;
        margin:0;
        background:#f3f4f6;
    }

    header{
        background:white;
        padding:20px;
        color:#000;
        text-align:center;
        font-size:28px;
        font-weight:700;
        position:sticky;
        top:0;
        z-index:10;
        box-shadow:0 2px 10px #00000010;
    }

    #products{
        display:grid;
        grid-template-columns:repeat(auto-fill, minmax(270px, 1fr));
        gap:28px;
        padding:30px;
        max-width:1300px;
        margin:auto;
    }

    .card{
        background:white;
        padding:18px;
        border-radius:20px;
        box-shadow:0 4px 20px #00000012;
        text-align:center;
        transition:0.3s;
        cursor:pointer;
    }

    .card:hover{
        transform:translateY(-6px);
        box-shadow:0 12px 30px #00000020;
    }

    .card img{
        width:100%;
        height:240px;
        object-fit:cover;
        border-radius:16px;
    }

    .card h3{
        font-weight:700;
        margin:15px 0 5px;
        font-size:22px;
        color:#111;
    }

    .card p{
        color:#666;
        font-size:15px;
        min-height:40px;
    }

    .price{
        color:#000;
        font-size:22px;
        font-weight:700;
        margin:14px 0;
    }

    .btn{
        background:#111;
        color:white;
        padding:12px;
        border:none;
        border-radius:14px;
        cursor:pointer;
        width:100%;
        font-size:17px;
        font-weight:600;
        transition:0.2s;
    }

    .btn:hover{
        background:#333;
    }

    #cart-btn{
        position:fixed;
        bottom:20px;
        right:20px;
        padding:16px 22px;
        background:#111;
        color:white;
        border:none;
        border-radius:50px;
        font-size:17px;
        cursor:pointer;
        box-shadow:0 0 18px #00000030;
    }

    #logout{
        position:fixed;
        bottom:20px;
        left:20px;
        padding:14px 20px;
        background:#d9534f;
        color:white;
        border:none;
        border-radius:12px;
        font-size:16px;
        cursor:pointer;
    }
  </style>
</head>
<body>

<header>ğŸ“± Maher Phone</header>
<div id="products"></div>
<button id="cart-btn" onclick="goCart()">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</button>
<button id="logout" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js">

// ğŸ”¥ Ø¥Ø¶Ø§ÙØ© Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬
const ADMIN_EMAIL = "clever2251999@gmail.com";

function deleteProduct(id){
    if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ØŸ")){
        db.collection("products").doc(id).delete()
        .then(()=>{
            alert("âœ” ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­");
            loadProducts();
        })
        .catch(err=>{
            alert("âš  Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù");
            console.error(err);
        });
    }
}

// â­ ØªØ­Ø¯ÙŠØ« loadProducts Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø­Ø°Ù Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·
// (ØªÙ… Ø¯Ù…Ø¬ Ø§Ù„ÙƒÙˆØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙÙŠ ÙƒÙ„ Ù…Ù†ØªØ¬)

</script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="firebase.js"></script>

<script>

auth.onAuthStateChanged(user=>{
    loadProducts();
});

function logout(){ auth.signOut(); location.href="index.html"; }
function goCart(){ location.href = "cart.html"; }

function addToCart(item){
    let cart = JSON.parse(localStorage.getItem("cart") || "[]");
    cart.push(item);
    localStorage.setItem("cart", JSON.stringify(cart));
    alert("âœ” ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©");
}

function loadProducts(){
    const container = document.getElementById("products");
    container.innerHTML = "<p style='text-align:center;width:100%'>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>";

    db.collection("products")
      .orderBy("createdAt", "desc")
      .get()
      .then(snap=>{
          container.innerHTML = "";
          snap.forEach(doc=>{
              let p = doc.data();

              container.innerHTML += `
                <div class="card">
                    <img src="${p.imageURL}" alt="">
                    <h3>${p.name}</h3>
                    <p>${p.description}</p>
                    <div class="price">${p.price} Ø¬Ù†ÙŠÙ‡</div>
                    <button class="btn" onclick='addToCart(${JSON.stringify({ id: doc.id, name: p.name, price: p.price, imageURL: p.imageURL })})'>ğŸ›’ Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
                </div>
              `;
          });
      })
      .catch(()=>{
          container.innerHTML = "<p style='color:red;text-align:center'>Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.</p>";
      });
}

</script>
</body>
</html>
